var blogApp=angular.module("blogApp",["ngRoute","ngCookies"]);angular.module("blogApp").config(["$routeProvider",function(e){e.when("/",{templateUrl:"login/login",controller:"loginCtrl"}),e.when("/Login",{templateUrl:"login/login",controller:"loginCtrl"}),e.when("/Register",{templateUrl:"login/register",controller:"registerCtrl"}),e.when("/Blog",{templateUrl:"blog/getblog",controller:"blogCtrl",resolve:{checkLoggedIn:checkLoggedIn}})}]);var checkLoggedIn=["$q","$http","$location","welcomeservice",function(e,o,r,l){var t=e.defer();return o.get("/api/loggedin").success(function(e){"0"!=e?(l.setObject(e),t.resolve()):(l.clear(),t.reject(),r.url("/Login"))}),t.promise}];angular.module("blogApp").factory("blogservice",["$http",function(e){var o={};return o.userregister=function(o){return e.post("/api/users",o)},o.userlogin=function(o){return e.post("/api/login",o)},o}]),angular.module("blogApp").service("welcomeservice",["$cookies",function(e){return{setObject:function(o){e.putObject("autharray",o)},getObject:function(){return e.getObject("autharray")},clear:function(){e.remove("autharray")}}}]),angular.module("blogApp").controller("loginCtrl",["$scope","$location","blogservice",function(e,o,r){e.loginobj={},e.regmessage="",e.failedmsg="",e.login=function(l){e.regmessage="",e.failedmsg="",r.userlogin(e.loginobj).then(function(r){"success"==r.data?(e.loginobj={},o.url("/Blog")):(e.loginobj.password="",e.regmessage="failed",e.failedmsg=r.data)},function(o){console.log(o),e.loginobj={},e.regmessage="failed",e.failedmsg=o.statusText})}}]),angular.module("blogApp").controller("registerCtrl",["$scope","blogservice",function(e,o){e.registerobj={},e.regmessage="",e.register=function(r){o.userregister(e.registerobj).then(function(o){"success"==o.data?(e.registerobj={},e.regmessage="success"):e.regmessage="failed"})}}]),angular.module("blogApp").controller("blogCtrl",["$rootScope","$scope","welcomeservice",function(e,o,r){o.logindata=r.getObject(),e.showwelcome=!0,e.username=o.logindata.username}]);